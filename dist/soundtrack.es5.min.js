require=function e$$0(f,e,g){function k(b,a){if(!e[b]){if(!f[b]){var c="function"==typeof require&&require;if(!a&&c)return c(b,!0);if(h)return h(b,!0);c=Error("Cannot find module '"+b+"'");throw c.code="MODULE_NOT_FOUND",c;}c=e[b]={exports:{}};f[b][0].call(c.exports,function(a){var c=f[b][1][a];return k(c?c:a)},c,c.exports,e$$0,f,e,g)}return e[b].exports}for(var h="function"==typeof require&&require,a=0;a<g.length;a++)k(g[a]);return k}({soundtrack:[function(m,f,e){function g(a){switch("undefined"===
typeof a?"undefined":h(a)){case "object":if(!a.name&&!a.src)throw"every track must have a name or a src: "+JSON.stringify(a);var b=a.name,l=a.src,c=a.start_ofs,d=a.end_ofs,e=a.loop_ofs,f=a.loop;return{name:void 0===b?a.src:b,src:void 0===l?a.name+".mp3":l,start_ofs:void 0===c?0:c,end_ofs:void 0===d?0:d,loop_ofs:void 0===e?0:e,loop:void 0===f?!0:f};case "string":return g({name:a})}}Object.defineProperty(e,"__esModule",{value:!0});var k=function(){function a(b,a){for(var c=0;c<a.length;c++){var d=a[c];
d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(b,d.key,d)}}return function(b,l,c){l&&a(b.prototype,l);c&&a(b,c);return b}}(),h="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"===typeof Symbol&&a.constructor===Symbol?"symbol":typeof a};m=function(){function a(b){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.players=[];this.tracks=[];
this.tracksByName={};b=b||{};this.loadtracks(b.tracks);if(void 0!==b.autoplay&&!1!==b.autoplay)switch(h(b.autoplay)){case "number":case "string":this.play(b.autoplay);break;case "boolean":this.play(0)}}k(a,[{key:"playByTrack",value:function(b){this.add_player(this.tracks[b])}},{key:"playByName",value:function(b){console.log("todo should play "+b+" by name: "+this.tracks[this.tracksByName[b]])}},{key:"play",value:function(b){switch("undefined"===typeof b?"undefined":h(b)){case "number":this.playByTrack(b);
break;case "string":this.playByName(b)}}},{key:"loadtracks",value:function(b){var a=this;this.tracks=this.tracks.concat(b.map(g)||[]);this.tracks.map(function(b,d){b.name&&(a.tracksByName[b.name]=d)})}},{key:"add_player",value:function(b){var a=new Audio(b.src);a.autoplay=!0;a.currentTime=b.start_ofs;if(b.loop)if(b.end_ofs||b.loop_ofs){var c=b.end_ofs/1E3;window.setInterval(function(){var d=a.duration-c;console.log((a.currentTime-d).toPrecision(7));a.currentTime>d&&(a.currentTime=b.loop_ofs,a.play())},
1)}else a.loop=!0;return this.players.push(a)-1}}]);return a}();e.soundtrack=m},{}]},{},[]);
